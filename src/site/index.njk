---
layout: layouts/_base.njk
homeConcepts:
  - name: Data Dignity
    href: /concepts/data-dignity/
    element: <data-dignity-animation/>
  - name: Quadratic Voting
    href: /concepts/quadratic-voting/
    element: <quadratic-voting-animation/>
  - name: Quadratic Funding
    href: /concepts/quadratic-funding/
    element: <quadratic-funding-animation/>
  - name: Partial Common Ownership
    href: /concepts/partial-common-ownership/
    element: <partial-common-ownership-animation/>
  - name: Radical Antitrust
    href: /concepts/radical-antitrust/
    element: <radical-antitrust-animation/>
  - name: Intersectional Social Identity
    href: /concepts/intersectional-social-identity/
    element: <intersectional-identity-animation/>
---

<!-- prettier-ignore -->
{% import "components/rxc-tv.njk" as rxcTvWidget %}
<!-- prettier-ignore -->
{% import "components/logo.njk" as logo %}
<!-- prettier-ignore -->
{% import "components/menu.njk" as menu %}
<!-- prettier-ignore -->
{% import "components/footer.njk" as footer %}

<!-- prettier-ignore -->
{{ menu.render() }}
<div
  class="relative grid grid-cols-layout-4 lg:grid-cols-layout-12 grid-rows-auto/1fr/auto content-between min-h-screen bg-golden-fizz"
>
  <header
    class="col-span-columns lg:col-start-column-1 lg:col-end-gutter-9 mt-margin lg:mt-lg/margin mb-12 lg:mb-8"
  >
    <h1
      class="font-display text-size-display lg:text-size-lg/display uppercase"
    >
      <a href="/">
        <span class="inline lg:hidden"
          >RXC is a social movement for next generation political
          economies</span
        >
        {{ logo.render(classes="hidden lg:inline-block align-top") }}
      </a>
    </h1>
  </header>
  <div
    id="concepts"
    class="col-span-columns lg:col-start-column-1 lg:col-end-gutter-9 self-center grid grid-cols-1 lg:grid-cols-3 gap-x-8 gap-y-16 lg:gap-y-12 mb-16 lg:mb-8"
  >
    {% for concept in homeConcepts%}
    <a
      class="group flex flex-col items-center justify-between"
      href="{{ concept.href }}"
    >
      <div></div>
      <div class="w-full max-w-sm">
        {{ concept.element | safe }}
      </div>
      <h2
        class="lg:h-line-2 mt-6 text-center text-size-2 lg:text-size-0 group-hover:thick-link"
      >
        {{ concept.name }}
      </h2>
    </a>
    {% endfor %}
  </div>
  <div
    class="sticky bottom-0 hidden lg:block col-start-margin-1 col-end-column-10 w-full pt-2 bg-white font-display text-size-lg/display"
  >
    <div class="message-marquee">
      <div class="marquee__inner">
        <span class="uppercase mx-6 whitespace-nowrap"
          >A Social Movement for Next-Generation Political Economies</span
        >
        <span aria-hidden="true" class="uppercase mx-6 whitespace-nowrap"
          >A Social Movement for Next-Generation Political Economies</span
        >
        <span aria-hidden="true" class="uppercase mx-6 whitespace-nowrap"
          >A Social Movement for Next-Generation Political Economies</span
        >
        <span aria-hidden="true" class="uppercase mx-6 whitespace-nowrap"
          >A Social Movement for Next-Generation Political Economies</span
        >
      </div>
    </div>
  </div>
  <aside
    class="lg:relative col-span-full lg:col-start-column-10 lg:col-end-last lg:row-span-full order-first lg:order-none"
  >
    <div
      class="lg:absolute lg:top-0 lg:left-0 lg:flex lg:flex-col lg:w-full lg:h-full bg-black text-white"
    >
      <a
        class="flex-initial block pt-margin lg:pt-lg/margin pb-margin lg:pb-4 px-4 lg:px-6 text-size-1 lg:text-size-0"
        href="{{ '/kiosk/papers/Taiwan_Grassroots_Digital_Democracy_That_Works_V1_DIGITAL_.pdf' if not rxcTv.isOn else '#tv'}}"
        target="{{ '_blank' if not rxcTv.isOn else ''}}"
      >
        <!-- prettier-ignore -->
        {% if not rxcTv.isOn %}
        <h2 class="font-bold">New Paper Out</h2>
        <p>Taiwan: Grassroots Digital Democracy That Works</p>
        <!-- prettier-ignore -->
        {% else %}
        <h2 class="font-bold">Streaming Now</h2>
        <p>{{ rxcTv.title }}</p>
        <!-- prettier-ignore -->
        {% endif %}
      </a>
      <div class="flex-initial hidden lg:block border-b mx-6"></div>
      <div
        id="twitter-marquee"
        class="flex-grow hidden lg:block mx-4 overflow-hidden"
      >
        <div class="marquee__inner">
          <a
            class="twitter-timeline py-4 text-size--2"
            href="https://twitter.com/RadxChange?ref_src=twsrc%5Etfw"
            data-theme="dark"
            data-chrome="noheader nofooter noborders noscrollbar transparent"
          >
            <span class="px-2">Loading tweets by @RadxChange...</span>
          </a>
        </div>
      </div>
    </div>
  </aside>
</div>
<!-- prettier-ignore -->
{{ footer.render() }}
<!-- prettier-ignore -->
{% if rxcTv.isOn %}
{{ rxcTvWidget.render(rxcTv.title, rxcTv.description, rxcTv.slidoUrl) }}
<script>
  // prettier-ignore
  {% include "components/rxc-tv.js" %}
</script>
<!-- prettier-ignore -->
{% endif %}
<script>
  const Animation = function ($root) {
    this.$root = $root;

    this.onMouseEnter = this._onMouseEnter.bind(this);
    this.onMouseLeave = this._onMouseLeave.bind(this);
    this.onIntersect = this._onIntersect.bind(this);
    this.observer = new IntersectionObserver(this.onIntersect, {
      threshold: [0.5, 1],
    });
  };

  Animation.prototype.init = function () {
    this.$root.addEventListener("mouseenter", this.onMouseEnter);
    this.$root.addEventListener("mouseleave", this.onMouseLeave);
    this.observer.observe(this.$root);
  };

  Animation.prototype._onIntersect = function (entries) {
    if (window.innerWidth >= 768) {
      return;
    }
    entries.forEach((entry) => {
      if (entry.intersectionRatio <= 0.5) {
        this.animate(false);
      } else if (entry.intersectionRatio === 1) {
        this.animate(true);
      }
    });
  };

  Animation.prototype._onMouseEnter = function () {
    if (window.innerWidth < 768) {
      return;
    }
    this.animate(true);
  };

  Animation.prototype._onMouseLeave = function () {
    if (window.innerWidth < 768) {
      return;
    }
    this.animate(false);
  };

  Animation.prototype.animate = function (state) {
    if (state) {
      this.$root.children[1].children[0].setAttribute("on", true);
    } else {
      this.$root.children[1].children[0].removeAttribute("on");
    }
  };

  const $concepts = document.getElementById("concepts").children;
  for (const $concept of $concepts) {
    const animation = new Animation($concept);
    animation.init();
  }
</script>
<script>
  window.twttr = (function (d, s, id) {
    var js,
      fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);

    t._e = [];
    t.ready = function (f) {
      t._e.push(f);
    };

    return t;
  })(document, "script", "twitter-wjs");

  twttr.ready(function (twttr) {
    twttr.events.bind("rendered", function (event) {
      setTimeout(() => {
        document
          .getElementById("twitter-marquee")
          .classList.add("twitter-marquee");
      }, 500);
    });
  });
</script>
<script>
  // prettier-ignore
  {% include "components/menu.js" %}
</script>
<script src="/animations/data-dignity.js"></script>
<script src="/animations/quadratic-voting.js"></script>
<script src="/animations/quadratic-funding.js"></script>
<script src="/animations/partial-common-ownership.js"></script>
<script src="/animations/radical-antitrust.js"></script>
<script src="/animations/intersectional-identity.js"></script>
